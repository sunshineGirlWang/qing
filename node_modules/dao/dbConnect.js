var mysql=require('mysql');

function connectServer(){
  var client=mysql.createConnection({
    host:'localhost',
         user:'root',
         password:'123',
         database:'test_node'
     })
     return client;
 }

//根据用户名查询密码
function  selectFun(client,user_name,callback){
    //client为一个mysql连接对象
     client.query('select pwd from login where user_name="'+user_name+'"',function(err,results,fields){
         if(err) throw err;
         callback(results);
    });
 }

//新增用户名及密码
 function insertFun(client,user_name,pwd,callback){
     client.query('insert into login(user_name,pwd) values(?,?)', [user_name,pwd], function(err,result){
        if( err ){
            console.log( "error:" + err.message);
             return err;
         }
           callback(err);
     });
}

//更新密码  TODO
//usr.updateFun(client,req.session.islogin,req.body.password3,


exports.connect = connectServer;
exports.selectFun  = selectFun;
exports.insertFun = insertFun;
